{% extends "layout.html"%}

{% block css %}
<link href="/public/css/index.css" rel="stylesheet">
<!--<style>-->
  <!--*{-->
    <!--margin: 0;-->
    <!--padding: 0;-->
  <!--}-->
  <!--html,body{-->
    <!--width: 100%;height: 1200px;-->
    <!--overflow: hidden;-->
  <!--}-->

  <!--canvas{-->
    <!--position: absolute;-->

    <!--z-index: -999;-->
    <!--/*width:800px;-->
    <!--hegiht:400px;*/-->
  <!--}-->
  <!--span{-->
    <!--color:#fff;-->
  <!--}-->
<!--</style>-->
<!--<script>-->
    <!--function rnd(n,m){-->
        <!--return parseInt(Math.random()*(m-n))+n;-->
    <!--}-->
    <!--//屏保-->
    <!--window.onload = function () {-->
        <!--var oC=document.getElementById('c1');-->
        <!--var gd=oC.getContext('2d'); //画笔-->

        <!--var winW=document.documentElement.clientWidth;-->
        <!--var winH=document.documentElement.clientHeight;-->

        <!--oC.width=winW;-->
        <!--oC.height=winH;-->

        <!--var N=7;//点数量-->
        <!--var aPoint=[]; //[{x,y,iSpeedX,iSpeedY},{},{}]-->
        <!--//添加点信息-->
        <!--for(var i=0; i<N; i++){-->
            <!--aPoint[i]={-->
                <!--x:rnd(0,winW),-->
                <!--y:rnd(0,winH),-->
                <!--iSpeedX:rnd(-10,10),-->
                <!--iSpeedY:rnd(-10,10)-->
            <!--};-->
        <!--}-->

        <!--var LEN=50; //尾巴个数-->
        <!--var oldArr=[]; //尾巴数据数组 [[{},{}],[]],保存多个过去式的aPoint-->


        <!--//绘制多个点 + 速度变化-->
        <!--setInterval(function() {-->
            <!--gd.clearRect(0,0,oC.width,oC.height);-->

            <!--//绘制点-->
            <!--for (var i = 0; i < N; i++) {-->
                <!--aPoint[i].x+=aPoint[i].iSpeedX;-->
                <!--aPoint[i].y+=aPoint[i].iSpeedY;-->
                <!--//限定-->
                <!--if(aPoint[i].x<=0){-->
                    <!--aPoint[i].x=0;-->
                    <!--aPoint[i].iSpeedX*=-1;-->
                <!--}-->
                <!--if(aPoint[i].x>=winW){-->
                    <!--aPoint[i].x=winW;-->
                    <!--aPoint[i].iSpeedX*=-1;-->
                <!--}-->
                <!--if(aPoint[i].y>=winH){-->
                    <!--aPoint[i].y=winH;-->
                    <!--aPoint[i].iSpeedY*=-1;-->
                <!--}-->
                <!--if(aPoint[i].y<=0){-->
                    <!--aPoint[i].y=0;-->
                    <!--aPoint[i].iSpeedY*=-1;-->
                <!--}-->
                <!--drawPoint(aPoint[i]);-->
            <!--}-->

            <!--//画线-->
            <!--gd.beginPath();-->
            <!--gd.strokeStyle='rgba('+ rnd(0,255)+','+ rnd(0,255)+','+ rnd(0,255)+'1)';-->
            <!--gd.moveTo(aPoint[0].x,aPoint[0].y);-->
            <!--for(var i=1; i<aPoint.length; i++){-->
                <!--gd.lineTo(aPoint[i].x, aPoint[i].y);-->
            <!--}-->
            <!--gd.closePath();-->
            <!--gd.stroke();-->

            <!--//绘制尾巴-->
            <!--var arr=[];//保存aPoint的信息，不含速度-->
            <!--for(var i=0; i<aPoint.length; i++){//收集aPoint的整体副本-->
                <!--arr[i]={//把当前点集合收集到arr数组-->
                    <!--x:aPoint[i].x,-->
                    <!--y:aPoint[i].y-->
                <!--};-->
            <!--}-->

            <!--oldArr.push(arr);//收集一个,就丢到尾巴对象里面-->

            <!--if(oldArr.length>LEN){ //超过尾巴总量，就弹掉一个-->
                <!--oldArr.shift();-->
            <!--}-->

            <!--for(var i=0; i<oldArr.length; i++){//根据尾巴个数-->
                <!--gd.beginPath();-->
                <!--var opacity=i/oldArr.length;//靠后的尾巴透明度调整-->
                <!--gd.strokeStyle='rgba(1,255,125,'+opacity+')';-->
                <!--gd.moveTo(oldArr[i][0].x, oldArr[i][0].y);//移动到第i个尾巴第0个点-->

                <!--for(var j=0; j<oldArr[i].length; j++){-->
                    <!--gd.lineTo(oldArr[i][j].x, oldArr[i][j].y);//连线到第i个尾巴第j个点-->
                <!--}-->
                <!--gd.closePath();-->
                <!--gd.stroke();-->
            <!--}-->

            <!--//定时器结束-->
        <!--},16);-->


        <!--function drawPoint(p){-->
            <!--var pW=1;-->
            <!--var pH=1;-->
            <!--gd.fillStyle='#fff';-->
            <!--gd.fillRect(p.x-pW/2, p.y-pH/2,pW,pH);-->
        <!--}-->


    <!--};-->
<!--</script>-->
{% endblock %}

{% block banner %}
<!--<canvas  id="c1" width="100%" height="100%">-->
  <!--<span>您的浏览器版本太低</span>-->
<!--</canvas>-->
<div class="banner">
  <section class="box">
    <ul class="texts">
      <p>打了死结的青春，捆死一颗苍白绝望的灵魂。</p>
      <p>为自己掘一个坟墓来葬心，红尘一梦，不再追寻。</p>
      <p>加了锁的青春，不会再因谁而推开心门。</p>
    </ul>
    <div class="avatar"><a href="javascript:;"><span>希声</span></a> </div>
  </section>
</div>
<!--<div class="photowall">
  <ul class="wall_a">
    <li><a href="/"><img src="/public/images/p01.jpg">
      <figcaption>
        <h2></h2>
      </figcaption>
    </a></li>
    <li><a href="/"><img src="/public/images/p02.jpg">
      <figcaption>
        <h2></h2>
      </figcaption>
    </a></li>
    <li><a href="/"><img src="/public/images/p03.jpg">
      <figcaption>
        <h2></h2>
      </figcaption>
    </a></li>
    <li>
      <p class="text_a"><a href="/"></a></p>
    </li>
    <li><a href="/"><img src="/public/images/p04.jpg">
      <figcaption>
        <h2> </h2>
      </figcaption>
    </a></li>
    <li>
      <p class="text_b"><a href="/"></a></p>
    </li>
    <li><a href="/"><img src="/public/images/p05.jpg">
      <figcaption>
        <h2> </h2>
      </figcaption>
    </a></li>
    <li><a href="/"><img src="/public/images/p06.jpg">
      <figcaption>
        <h2></h2>
      </figcaption>
    </a></li>
  </ul>
</div>-->
<!--<div class="about">
  <ul>
    <div id="fountainG">
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
    </div>
    <div class="about_girl"><span><a href="/"><img src="/public/images/girl.jpg"></a></span>
      <p></p>
    </div>
    <div class="about_boy"><span><a href="/"><img src="/public/images/boy.jpg"></a></span>
      <p></p>
    </div>
  </ul>
</div>-->
<!--<div class="blank"></div>-->
{% endblock %}

{% block content %}
<h2 class="title_tj">
  <p>文章<span>推荐</span></p>
</h2>
<div class="bloglist left">

  {% for article in articles %}
    
    {% autoescape false %}

  <h3>{{article.title}}</h3>
  <figure><img src="/public/images/001.png"></figure>
  <ul>
    <p>{{article.description}}</p>
    <a href="/new?id={{article.id}}" target="_blank" class="readmore">阅读全文>></a>
  </ul>
  <p class="dateview">
    <span>{{article.addTime|date("Y-m-d H:i:s",-8*60)}}</span>
    <span>作者：{{article.user.username}}</span>
    <span>点击量：{{article.views}}</span>
  </p>

    {% endautoescape %}

  {% endfor %}
</div>
{% endblock %}


{% block user %}
<div class="top">
  {% if userInfo._id %}
  <ul id="userInfo">
    <h3>
      <p>用户<span>信息</span></p>
    </h3>
    {% if userInfo.isAdmin%}
    <li>
      <h3 class="username" style="color:orange;">{{unescape(userInfo.username)}}</h3>你好，管理员！
      <a href="/admin" class="admin">进入管理</a>
    </li>
    {% else %}
    <li><h3 class="username">{{unescape(userInfo.username)}}</h3>欢迎光临我的博客！</li>
    {% endif %}

    <li><a href="javascript:;" class="logOut">退出登录</a></li>

  </ul>
  {% else %}
  <ul id="login">
    <h3>
      <p>用户<span>登录</span></p>
    </h3>
    <li><span>用户名：</span><input type="text" name="username"></li>
    <li><span>密码：</span><input type="password" name="password"></li>
    <li><span></span><a href="javascript:;">登录</a></li>
    <li class="last" id="toReg"><a href="javascript:;">还没注册？立即注册</a></li>
    <li class="info"><p class="message"></p></li>
  </ul>

  <ul id="register" style="display: none" >
    <h3>
      <p>用户<span>注册</span></p>
    </h3>
    <li><span>用户名：</span><input type="text" name="username"></li>
    <li><span>密码：</span><input type="password" name="password"></li>
    <li><span>确认密码：</span><input type="password" name="repassword"></li>
    <li><span></span><a href="javascript:;">注册</a></li>
    <li class="last" id="toLogin"><a href="javascript:;">注册成功，立即登录</a></li>
    <li class="info"><p class="message"></p></li>
  </ul>
  {% endif %}
</div>

{% endblock %}


{% block js %}
<script src="/public/js/index.js"></script>


{% endblock %}